<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Detalle de Producto</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>

  <div class="container py-5">
    <div class="row">

      <!-- Carrusel de imágenes del producto -->
      <div class="col-md-6">
        <div id="carouselProducto" class="carousel slide" data-bs-ride="carousel">
          <div class="carousel-inner">
            <div class="carousel-item active" *ngIf="producto?.imagen">
              <img [src]="producto?.imagen" class="d-block w-100 rounded shadow-sm" alt="Imagen 1">
            </div>
            <div class="carousel-item" *ngIf="producto?.imagen2">
              <img [src]="producto?.imagen2" class="d-block w-100 rounded shadow-sm" alt="Imagen 2">
            </div>
            <div class="carousel-item" *ngIf="producto?.imagen3">
              <img [src]="producto?.imagen3" class="d-block w-100 rounded shadow-sm" alt="Imagen 3">
            </div>
          </div>
          <button class="carousel-control-prev" type="button" data-bs-target="#carouselProducto" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Anterior</span>
          </button>
          <button class="carousel-control-next" type="button" data-bs-target="#carouselProducto" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Siguiente</span>
          </button>
        </div>
      </div>

      <!-- Detalles del producto -->
      <div class="col-md-6">
        <h1 class="display-5 fw-bold mb-3">{{ producto?.nombre }}</h1>
        <p class="text-muted mb-2">Categoría: <span class="fw-semibold">{{ producto?.categoria }}</span></p>
        <p class="fs-5">{{ producto?.descripcion }}</p>
        <p class="fs-4 fw-bold text-success">{{ producto?.precio | currency:'USD' }}</p>
        <button class="heart-button" (click)="toggleFavorito()"
          [attr.aria-label]="esFavorito ? 'Quitar de favoritos' : 'Agregar a favoritos'"
          [title]="esFavorito ? 'Quitar de favoritos' : 'Agregar a favoritos'">
          <i [ngClass]="esFavorito ? 'bi bi-heart-fill' : 'bi bi-heart'"></i>
        </button>
        <p *ngIf="producto?.stock && producto!.stock > 0">En stock: {{ producto?.stock }}</p>
        <p *ngIf="producto?.stock === 0">Agotado</p>

        <button class="btn btn-dark btn-lg mt-4" (click)="addToCart(producto!)"
          [disabled]="!producto || producto.stock === 0">
          Agregar al carrito
        </button>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>