<div class="container py-5">
  <h2 class="mb-4">Carrito de Compras</h2>

  <!-- Si el carrito está vacío -->
  <div *ngIf="!cartProductos.length" class="alert alert-info">
    Tu carrito está vacío.
  </div>

  <!-- Lista de productos en el carrito -->
  <div *ngIf="cartProductos.length">
    <div class="row mb-4 align-items-center flex-column flex-md-row text-center text-md-start"
      *ngFor="let producto of cartProductos">

      <!-- Imagen -->
      <div class="col-md-2 mb-2 mb-md-0">
        <img [src]="producto.imagen" alt="{{ producto.nombre }}" class="img-fluid rounded shadow-sm" />
      </div>

      <!-- Nombre y descripción -->
      <div class="col-md-5 mb-2 mb-md-0">
        <h5 class="fw-bold mb-1">{{ producto.nombre }}</h5>
        <p class="mb-1">{{ producto.descripcion }}</p>
        <small class="text-muted">Stock disponible: {{ producto.stock }}</small>
      </div>

      <!-- Precio -->
      <div class="col-md-3 d-flex justify-content-center justify-content-md-end align-items-center mb-2 mb-md-0">
        <div class="btn-group me-2" role="group">
          <button class="btn btn-outline-secondary btn-sm" (click)="decrementarCantidad(producto.productoId)">-</button>
          <button class="btn btn-outline-primary btn-sm" disabled>{{ producto.cantidad }}</button>
          <button class="btn btn-outline-secondary btn-sm" (click)="incrementarCantidad(producto.productoId)">+</button>
        </div>
        <p class="fs-5 fw-bold text-success mb-0 ms-2">
          {{ producto.precio | currency:'USD' }}
        </p>
      </div>

      <!-- Botón eliminar -->
      <div class="col-md-2 d-flex justify-content-center justify-content-md-end align-items-center">
        <button class="btn btn-sm btn-danger" (click)="eliminar(producto.productoId)">
          <i class="bi bi-trash"></i>
        </button>
      </div>

      <hr class="my-3 w-100 d-none d-md-block" />
    </div>

    <!-- Total y botón de compra -->
    <div
      class="d-flex flex-column flex-md-row justify-content-between align-items-center mt-4 text-center text-md-start">
      <h4 class="mb-3 mb-md-0">Total: {{ totalCarrito | currency:'USD' }}</h4>
      <button class="btn btn-success btn-lg" (click)="comprar()">Comprar</button>
    </div>
  </div>
</div>